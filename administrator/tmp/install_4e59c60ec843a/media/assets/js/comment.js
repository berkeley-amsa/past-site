/* Copyright (C) 2007 - 2011 YOOtheme GmbH, YOOtheme Proprietary Use License (http://www.yootheme.com/license) */

(function(a){var f=function(){};a.extend(f.prototype,{name:"Comment",options:{cookiePrefix:"zoo-comment_",cookieLifetime:15552E3},initialize:function(c,d){this.options=a.extend({},this.options,d);var e=this,b=a("#respond");b.find(".actions .cancel").bind("click",function(g){g.preventDefault();b.appendTo(a("#comments").find(".comments"));b.find("input[name=parent_id]").val(0)});b.find("form").bind("submit",function(){a(this).find("span.submit-message").addClass("submitting")});b.find("a.facebook-connect").bind("click",
function(){e.setLoginCookie("facebook")});b.find("a.facebook-logout").bind("click",function(){e.setLoginCookie("")});b.find("a.twitter-connect").bind("click",function(){e.setLoginCookie("twitter")});b.find("a.twitter-logout").bind("click",function(){e.setLoginCookie("")});a("#comments .comment").each(function(){var g=a(this);g.find(".reply a").bind("click",function(h){h.preventDefault();b.appendTo(g);b.find("input[name=parent_id]").val(g.attr("id").replace(/comment-/i,""))})})},setLoginCookie:function(c){a.cookie(this.options.cookiePrefix+
"login",c,{expires:this.options.cookieLifetime/86400,path:"/"})}});a.fn[f.prototype.name]=function(){var c=arguments,d=c[0]?c[0]:null;return this.each(function(){var e=a(this);if(f.prototype[d]&&e.data(f.prototype.name)&&d!="initialize")e.data(f.prototype.name)[d].apply(e.data(f.prototype.name),Array.prototype.slice.call(c,1));else if(!d||a.isPlainObject(d)){var b=new f;f.prototype.initialize&&b.initialize.apply(b,a.merge([e],c));e.data(f.prototype.name,b)}else a.error("Method "+d+" does not exist on jQuery."+
f.name)})}})(jQuery);
(function(a){var f=function(){};a.extend(f.prototype,{name:"BrowseComments",options:{url:"index.php?option=com_zoo&controller=comment",id:"edit-comment-editor"},initialize:function(c,d){this.options=a.extend({},this.options,d);var e=this;this.form=c;c.delegate("tr.comment-row .actions-links .edit, tr.comment-row .actions-links .reply","click",function(b){b.preventDefault();b=a(this).attr("class");e.modifyEvent(a(this).closest("tr.comment-row"),b)});c.delegate("tr.comment-row .actions-links span","click",
function(b){b.preventDefault();switch(a(this).attr("class")){case "no-spam":b="approve";break;case "delete":b="remove";break;default:b=a(this).attr("class")}e.stateEvent(a(this).closest("tr.comment-row"),b)})},modifyEvent:function(c,d){$this=this;a.ajax({url:this.options.url,data:{task:d,format:"raw",cid:c.find('input[name^="cid["]').val()},success:function(e){$this.removeEditor();$this.insertEditor(c,e);d=="edit"&&c.hide();$this.form.unbind("save").unbind("cancel").bind("save",function(b,g){$this.removeEditor();
d=="edit"?c.replaceWith(g):a(g).insertAfter(c);$this.stripe()}).bind("cancel",function(){$this.removeEditor()})}})},stateEvent:function(c,d){a('<input type="hidden" name="cid">').val(c.find('input[name^="cid["]').val()).appendTo(this.form);this.form.find("input[name=task]").val(d);this.form.submit()},insertEditor:function(c,d){var e=c.after(d).next();e.find(".actions .save").bind("click",function(b){b.preventDefault();var g={};a.each($this.form.serializeArray(),function(h,i){g[i.name]=i.value});a.ajax({type:"POST",
url:$this.options.url,data:a.extend(g,{task:"save",format:"raw"}),success:function(h){$this.form.triggerHandler("save",h)}})});e.find(".actions .cancel").bind("click",function(b){b.preventDefault();$this.form.triggerHandler("cancel")});e.find(".content textarea").focus()},removeEditor:function(){a("#"+this.options.id,this.form).prev("tr").show();a("#"+this.options.id,this.form).remove()},stripe:function(){a("table.stripe tbody tr").removeClass("odd even").each(function(){a(this).addClass(a(this).is("tr:odd")?
"odd":"even")})}});a.fn[f.prototype.name]=function(){var c=arguments,d=c[0]?c[0]:null;return this.each(function(){var e=a(this);if(f.prototype[d]&&e.data(f.prototype.name)&&d!="initialize")e.data(f.prototype.name)[d].apply(e.data(f.prototype.name),Array.prototype.slice.call(c,1));else if(!d||a.isPlainObject(d)){var b=new f;f.prototype.initialize&&b.initialize.apply(b,a.merge([e],c));e.data(f.prototype.name,b)}else a.error("Method "+d+" does not exist on jQuery."+f.name)})}})(jQuery);
